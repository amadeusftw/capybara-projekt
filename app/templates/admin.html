{% extends "base.html" %}

{% block content %}
<div class="container-box">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="text-primary"><i class="fas fa-crown"></i> Admin Dashboard</h2>
        <div>
            <a href="{{ url_for('admin_bp.export_excel') }}" class="btn btn-success rounded-pill me-2">
                <i class="fas fa-file-excel"></i> Ladda ner Excel
            </a>
            <a href="{{ url_for('auth.logout') }}" class="btn btn-outline-danger rounded-pill">Logga ut</a>
        </div>
    </div>

    <form method="GET" action="{{ url_for('admin_bp.admin_dashboard') }}" class="row g-3 mb-4 p-3 bg-light rounded shadow-sm">
        <div class="col-md-3">
            <input type="text" name="first_name" class="form-control" placeholder="Filtrera p친 f칬rnamn" value="{{ first_name_filter }}">
        </div>
        <div class="col-md-3">
            <input type="text" name="last_name" class="form-control" placeholder="Filtrera p친 efternamn" value="{{ last_name_filter }}">
        </div>
        <div class="col-md-3">
            <input type="text" name="title" class="form-control" placeholder="Filtrera p친 titel" value="{{ title_filter }}">
        </div>
        <div class="col-md-3 d-grid">
            <button type="submit" class="btn btn-primary rounded-pill">S칬k / Filtrera</button>
        </div>
    </form>

    <div class="table-responsive">
        <table class="table table-hover align-middle">
            <thead class="table-dark">
                <tr>
                    <th scope="col">ID</th>
                    <th scope="col">Namn</th>
                    <th scope="col">Email</th>
                    <th scope="col">F칬retag</th>
                    <th scope="col">Titel</th>
                    <th scope="col">Reg. Datum</th>
                    <th scope="col">칀tg칛rd</th>
                </tr>
            </thead>
            <tbody>
                {% for sub in subs %}
                <tr>
                    <td>{{ sub.id }}</td>
                    <td><strong>{{ sub.first_name }} {{ sub.last_name }}</strong></td>
                    <td><a href="mailto:{{ sub.email }}" class="text-decoration-none">{{ sub.email }}</a></td>
                    <td>{{ sub.company }}</td>
                    <td><span class="badge bg-info text-dark">{{ sub.title }}</span></td>
                    <td>{{ sub.created_at|datetimeformat }}</td>
                    <td>
                        <a href="{{ url_for('delete', id=sub.id) }}" class="btn btn-sm btn-danger rounded-pill" onclick="return confirm('츿r du s칛ker p친 att du vill radera denna prenumerant?');">
                            Radera
                        </a>
                    </td>
                </tr>
                {% else %}
                <tr>
                    <td colspan="7" class="text-center py-4 text-muted">Inga prenumeranter hittades... 游꼒</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}