{% extends "base.html" %}
{% block content %}
<div class="container container-admin">
    <div style="display:flex; justify-content:space-between; align-items:center;">
        <h2>ğŸ“‹ Alla Prenumeranter</h2>
        <a href="/logout" style="background:#eee; padding:10px 20px; border-radius:20px; text-decoration:none; color:#333; font-weight:bold;">Logga ut ğŸƒ</a>
    </div>

    {% with messages = get_flashed_messages() %}
        {% if messages %}<div class="flash">{{ messages[0] }}</div>{% endif %}
    {% endwith %}

    <div class="form-col" style="background:white; padding:20px; margin-bottom:30px; border:2px solid #eee; box-shadow:none;">
        <form method="GET" action="/admin" class="search-box" style="margin:0;">
            <input type="text" name="q" placeholder="ğŸ” SÃ¶k pÃ¥ namn, fÃ¶retag eller mail..." class="search-input" value="{{ request.args.get('q', '') }}">
            <button type="submit" class="search-btn">Filtrera</button>
            {% if request.args.get('q') %}
                <a href="/admin" style="padding:12px; color:#FF6B6B; text-decoration:none; display:flex; align-items:center;">Rensa X</a>
            {% endif %}
        </form>
    </div>

    <table>
        <thead>
            <tr>
                <th style="width:20%;">Namn</th>
                <th style="width:25%;">Email</th>
                <th style="width:20%;">FÃ¶retag</th>
                <th style="width:20%;">Titel</th>
                <th style="width:15%; text-align:center;">Ã…tgÃ¤rd</th>
            </tr>
        </thead>
        <tbody>
            {% for s in subs %}
            <tr>
                <td><strong>{{ s.first_name }} {{ s.last_name }}</strong></td>
                <td>{{ s.email }}</td>
                <td>{{ s.company }}</td>
                <td>{{ s.title }}</td>
                <td style="text-align:center;">
                    <a href="/delete/{{ s.id }}" style="background:#FF6B6B; color:white; padding:5px 15px; border-radius:15px; text-decoration:none; font-size:0.9rem;" onclick="return confirm('Ã„r du sÃ¤ker pÃ¥ att du vill radera denna?');">Radera</a>
                </td>
            </tr>
            {% else %}
            <tr>
                <td colspan="5" style="text-align:center; padding:30px; color:#999;">
                    {% if request.args.get('q') %}
                        Inga trÃ¤ffar pÃ¥ din sÃ¶kning... ğŸ•µï¸
                    {% else %}
                        Inga medlemmar registrerade Ã¤n...
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}